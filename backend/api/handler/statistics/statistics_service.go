/*
 * Copyright 2025 coze-dev Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// Code generated by hertz generator.

package statistics

import (
	"context"

	"github.com/cloudwego/hertz/pkg/app"
	"github.com/cloudwego/hertz/pkg/protocol/consts"
	statistics "github.com/coze-dev/coze-studio/backend/api/model/statistics"
	"github.com/coze-dev/coze-studio/backend/application"
)

// GetAppDailyMessages .
// @router /api/statistics/app/messages [POST]
func GetAppDailyMessages(ctx context.Context, c *app.RequestContext) {
	var err error
	var req statistics.GetAppDailyMessagesRequest
	err = c.BindAndValidate(&req)
	if err != nil {
		c.String(consts.StatusBadRequest, err.Error())
		return
	}

	// 调用Application层
	resp, err := application.GetStatisticsApp().GetAppDailyMessages(ctx, &req)
	if err != nil {
		c.JSON(consts.StatusInternalServerError, &statistics.GetAppDailyMessagesResponse{
			Code: 500,
			Msg:  err.Error(),
			Data: []*statistics.MessageStatData{},
		})
		return
	}

	c.JSON(consts.StatusOK, resp)
}

// GetAppDailyActiveUsers .
// @router /api/statistics/app/active-users [POST]
func GetAppDailyActiveUsers(ctx context.Context, c *app.RequestContext) {
	var err error
	var req statistics.GetAppDailyActiveUsersRequest
	err = c.BindAndValidate(&req)
	if err != nil {
		c.String(consts.StatusBadRequest, err.Error())
		return
	}

	// 调用Application层
	resp, err := application.GetStatisticsApp().GetAppDailyActiveUsers(ctx, &req)
	if err != nil {
		c.JSON(consts.StatusInternalServerError, &statistics.GetAppDailyActiveUsersResponse{
			Code: 500,
			Msg:  err.Error(),
			Data: []*statistics.ActiveUsersStatData{},
		})
		return
	}

	c.JSON(consts.StatusOK, resp)
}

// GetAppTokens .
// @router /api/statistics/app/tokens [POST]
func GetAppTokens(ctx context.Context, c *app.RequestContext) {
	var err error
	var req statistics.GetAppTokensRequest
	err = c.BindAndValidate(&req)
	if err != nil {
		c.String(consts.StatusBadRequest, err.Error())
		return
	}

	// 调用Application层
	resp, err := application.GetStatisticsApp().GetAppTokens(ctx, &req)
	if err != nil {
		c.JSON(consts.StatusInternalServerError, &statistics.GetAppTokensResponse{
			Code: 500,
			Msg:  err.Error(),
			Data: []*statistics.TokenStatData{},
		})
		return
	}

	c.JSON(consts.StatusOK, resp)
}

// GetAppAverageSessionInteractions .
// @router /api/statistics/app/session-interactions [POST]
func GetAppAverageSessionInteractions(ctx context.Context, c *app.RequestContext) {
	var err error
	var req statistics.GetAppAverageSessionInteractionsRequest
	err = c.BindAndValidate(&req)
	if err != nil {
		c.String(consts.StatusBadRequest, err.Error())
		return
	}

	// 调用Application层
	resp, err := application.GetStatisticsApp().GetAppAverageSessionInteractions(ctx, &req)
	if err != nil {
		c.JSON(consts.StatusInternalServerError, &statistics.GetAppAverageSessionInteractionsResponse{
			Code: 500,
			Msg:  err.Error(),
			Data: []*statistics.AverageSessionInteractionsData{},
		})
		return
	}

	c.JSON(consts.StatusOK, resp)
}

// GetAppTokensPerSecond .
// @router /api/statistics/app/tokens-per-second [POST]
func GetAppTokensPerSecond(ctx context.Context, c *app.RequestContext) {
	var err error
	var req statistics.GetAppTokensPerSecondRequest
	err = c.BindAndValidate(&req)
	if err != nil {
		c.String(consts.StatusBadRequest, err.Error())
		return
	}

	// 调用Application层
	resp, err := application.GetStatisticsApp().GetAppTokensPerSecond(ctx, &req)
	if err != nil {
		c.JSON(consts.StatusInternalServerError, &statistics.GetAppTokensPerSecondResponse{
			Code: 500,
			Msg:  err.Error(),
			Data: []*statistics.TokensPerSecondData{},
		})
		return
	}

	c.JSON(consts.StatusOK, resp)
}

// ListAppConversationLog .
// @router /api/statistics/app/list_app_conversation_log [POST]
func ListAppConversationLog(ctx context.Context, c *app.RequestContext) {
	var err error
	var req statistics.ListAppConversationLogRequest
	err = c.BindAndValidate(&req)
	if err != nil {
		c.String(consts.StatusBadRequest, err.Error())
		return
	}

	// 调用Application层
	resp, err := application.GetStatisticsApp().ListAppConversationLog(ctx, &req)
	if err != nil {
		c.JSON(consts.StatusInternalServerError, &statistics.ListAppConversationLogResponse{
			Code: 500,
			Msg:  err.Error(),
			Data: []*statistics.ListAppConversationLogData{},
		})
		return
	}

	c.JSON(consts.StatusOK, resp)
}

// ListConversationMessageLog .
// @router /api/statistics/app/list_conversation_message_log [POST]
func ListConversationMessageLog(ctx context.Context, c *app.RequestContext) {
	var err error
	var req statistics.ListConversationMessageLogRequest
	err = c.BindAndValidate(&req)
	if err != nil {
		c.String(consts.StatusBadRequest, err.Error())
		return
	}

	// 调用Application层
	resp, err := application.GetStatisticsApp().ListConversationMessageLog(ctx, &req)
	if err != nil {
		c.JSON(consts.StatusInternalServerError, &statistics.ListConversationMessageLogResponse{
			Code: 500,
			Msg:  err.Error(),
			Data: []*statistics.ListConversationMessageLogData{},
		})
		return
	}

	c.JSON(consts.StatusOK, resp)
}

// ListAppMessageWithConLog .
// @router /api/statistics/app/list_app_message_conlog [POST]
func ListAppMessageWithConLog(ctx context.Context, c *app.RequestContext) {
	var err error
	var req statistics.ListAppMessageWithConLogRequest
	err = c.BindAndValidate(&req)
	if err != nil {
		c.String(consts.StatusBadRequest, err.Error())
		return
	}

	// 调用Application层
	resp, err := application.GetStatisticsApp().ListAppMessageWithConLog(ctx, &req)
	if err != nil {
		c.JSON(consts.StatusInternalServerError, &statistics.ListAppMessageWithConLogResponse{
			Code: 500,
			Msg:  err.Error(),
			Data: []*statistics.ListAppMessageWithConLogData{},
		})
		return
	}

	c.JSON(consts.StatusOK, resp)
}
