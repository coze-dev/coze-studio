# Common Scripts ç›®å½•è¯´æ˜

æœ¬ç›®å½•åŒ…å«äº†é¡¹ç›®é€šç”¨çš„è„šæœ¬å·¥å…·ï¼Œä¸»è¦ç”¨äºè‡ªåŠ¨åŒ–å®‰è£…å’Œè¿è¡Œå„ç§ Node.js å·¥å…·ã€‚è¿™äº›è„šæœ¬ç”± Rush å·¥å…·è‡ªåŠ¨ç”Ÿæˆï¼Œç¡®ä¿åœ¨ä¸åŒç¯å¢ƒä¸­èƒ½å¤Ÿä¸€è‡´åœ°è¿è¡Œé¡¹ç›®å‘½ä»¤ã€‚

## è„šæœ¬åˆ—è¡¨

### ğŸ“¦ Rush å·¥å…·è„šæœ¬

#### `install-run-rush.js`
**åŠŸèƒ½**: è‡ªåŠ¨å®‰è£…å¹¶è¿è¡Œ Rush å‘½ä»¤
- è‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£… rush.json ä¸­æŒ‡å®šç‰ˆæœ¬çš„ Rush
- åœ¨ Rush æœªå®‰è£…æˆ–ç‰ˆæœ¬ä¸åŒ¹é…æ—¶è‡ªåŠ¨å¤„ç†
- é€‚ç”¨äºè‡ªåŠ¨åŒ–æ„å»ºç¯å¢ƒ
- **ä½¿ç”¨ç¤ºä¾‹**: `node common/scripts/install-run-rush.js install`

#### `install-run-rushx.js`
**åŠŸèƒ½**: è‡ªåŠ¨å®‰è£…å¹¶è¿è¡Œ rushx å‘½ä»¤
- åŸºäº `install-run-rush.js` å®ç°
- ä¸“é—¨ç”¨äºæ‰§è¡Œ rushx è‡ªå®šä¹‰å‘½ä»¤
- ç¡®ä¿ Rush ç¯å¢ƒæ­£ç¡®é…ç½®åæ‰§è¡Œ rushx
- **ä½¿ç”¨ç¤ºä¾‹**: `node common/scripts/install-run-rushx.js custom-command`

#### `install-run-rush-pnpm.js`
**åŠŸèƒ½**: è‡ªåŠ¨å®‰è£…å¹¶è¿è¡Œ rush-pnpm å‘½ä»¤
- åŸºäº `install-run-rush.js` å®ç°
- ä¸“é—¨ç”¨äºæ‰§è¡Œ rush-pnpm ç›¸å…³å‘½ä»¤
- ç»“åˆ pnpm åŒ…ç®¡ç†å™¨ä½¿ç”¨
- **ä½¿ç”¨ç¤ºä¾‹**: `node common/scripts/install-run-rush-pnpm.js pnpm-command`

### ğŸ› ï¸ é€šç”¨å·¥å…·è„šæœ¬

#### `install-run.js`
**åŠŸèƒ½**: é€šç”¨çš„ Node.js å·¥å…·å®‰è£…è¿è¡Œè„šæœ¬
- è‡ªåŠ¨å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Node.js å·¥å…·
- æ”¯æŒä»»æ„ npm åŒ…çš„è‡ªåŠ¨å®‰è£…å’Œè¿è¡Œ
- å¤„ç†ç‰ˆæœ¬æ£€æŸ¥å’Œä¾èµ–ç®¡ç†
- **ä½¿ç”¨ç¤ºä¾‹**: `node common/scripts/install-run.js qrcode@1.2.2 qrcode https://rushjs.io`

## è„šæœ¬ç‰¹ç‚¹

### ğŸ”„ è‡ªåŠ¨åŒ–ç‰¹æ€§
- **ç‰ˆæœ¬ç®¡ç†**: æ ¹æ®é…ç½®æ–‡ä»¶è‡ªåŠ¨å®‰è£…æ­£ç¡®ç‰ˆæœ¬çš„å·¥å…·
- **ç¯å¢ƒé€‚åº”**: é€‚ç”¨äºæœ¬åœ°å¼€å‘å’Œ CI/CD ç¯å¢ƒ
- **ç¼“å­˜æœºåˆ¶**: é¿å…é‡å¤å®‰è£…å·²æœ‰çš„å·¥å…·ç‰ˆæœ¬
- **é”™è¯¯å¤„ç†**: åŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

### ğŸ›¡ï¸ å®‰å…¨æ€§
- æ‰€æœ‰è„šæœ¬éƒ½ç”± Rush å·¥å…·è‡ªåŠ¨ç”Ÿæˆ
- éµå¾ª Microsoft çš„å¼€æºè®¸å¯è¯
- åŒ…å«å®Œæ•´çš„ç‰ˆæœ¬éªŒè¯å’Œç­¾åæ£€æŸ¥

### âš¡ æ€§èƒ½ä¼˜åŒ–
- æ™ºèƒ½ç¼“å­˜å·²å®‰è£…çš„å·¥å…·ç‰ˆæœ¬
- å¹¶è¡ŒåŒ–å®‰è£…å’Œè¿è¡Œæµç¨‹
- æœ€å°åŒ–ç½‘ç»œè¯·æ±‚å’Œç£ç›˜æ“ä½œ

## ä½¿ç”¨åœºæ™¯

### ğŸ—ï¸ CI/CD ç¯å¢ƒ
```bash
# åœ¨ CI ä¸­å®‰è£…ä¾èµ–
node common/scripts/install-run-rush.js install

# æ‰§è¡Œæ„å»º
node common/scripts/install-run-rush.js build

# æ‰§è¡Œæµ‹è¯•
node common/scripts/install-run-rushx.js test
```

### ğŸ‘©â€ğŸ’» æœ¬åœ°å¼€å‘
```bash
# æœ¬åœ°å®‰è£…ä¾èµ–
node common/scripts/install-run-rush.js update

# è¿è¡Œè‡ªå®šä¹‰å‘½ä»¤
node common/scripts/install-run-rushx.js start

# ä½¿ç”¨ç‰¹å®šå·¥å…·
node common/scripts/install-run.js prettier@2.8.0 prettier --check .
```

### ğŸ“‹ æ‰¹å¤„ç†è„šæœ¬
```bash
# åœ¨å…¶ä»–è„šæœ¬ä¸­ä½¿ç”¨
#!/bin/bash
node common/scripts/install-run-rush.js install
node common/scripts/install-run-rushx.js lint
node common/scripts/install-run-rushx.js test
```

## ç¯å¢ƒè¦æ±‚

- **Node.js**: éœ€è¦ Node.js è¿è¡Œç¯å¢ƒ
- **ç½‘ç»œè®¿é—®**: é¦–æ¬¡è¿è¡Œæ—¶éœ€è¦ä¸‹è½½å·¥å…·åŒ…
- **æ–‡ä»¶æƒé™**: éœ€è¦åœ¨ common/temp ç›®å½•æœ‰å†™å…¥æƒé™
- **é…ç½®æ–‡ä»¶**: éœ€è¦æœ‰æ•ˆçš„ rush.json é…ç½®æ–‡ä»¶

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ç½‘ç»œé—®é¢˜**: é…ç½® npm registry æˆ–ä½¿ç”¨ä¼ä¸šå†…ç½‘é•œåƒ
2. **æƒé™é—®é¢˜**: ç¡®ä¿æœ‰è¶³å¤Ÿçš„æ–‡ä»¶ç³»ç»Ÿæƒé™
3. **ç‰ˆæœ¬å†²çª**: æ¸…ç† common/temp ç›®å½•é‡æ–°å®‰è£…
4. **é…ç½®é”™è¯¯**: æ£€æŸ¥ rush.json é…ç½®æ˜¯å¦æ­£ç¡®

### è°ƒè¯•å»ºè®®
- æŸ¥çœ‹ common/temp ç›®å½•çš„æ—¥å¿—æ–‡ä»¶
- ä½¿ç”¨ `--debug` å‚æ•°è·å–è¯¦ç»†è¾“å‡º
- æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
- éªŒè¯ç½‘ç»œè¿æ¥å’Œä»£ç†è®¾ç½®

## æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æé†’**:
- è¿™äº›è„šæœ¬ç”±å·¥å…·è‡ªåŠ¨ç”Ÿæˆï¼Œè¯·å‹¿æ‰‹åŠ¨ä¿®æ”¹
- Rush å‡çº§æ—¶ä¼šè¦†ç›–è¿™äº›æ–‡ä»¶
- å¦‚éœ€è‡ªå®šä¹‰ï¼Œè¯·åœ¨é¡¹ç›®é…ç½®ä¸­è¿›è¡Œ
- åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å‰è¯·å……åˆ†æµ‹è¯•